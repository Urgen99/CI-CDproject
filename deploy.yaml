me: Deploy Dockerized Web Application
hosts: webservers
become: yes
vars:
  docker_image: "myapp:latest"

roles:
  - docker
  - apache
  - ntp
tasks:
  - name: Pull Docker image
    docker_image:
      name: "{{ docker_image }}"
      source: pull

  - name: Stop and remove existing container
    docker_container:
      name: myapp
      state: absent
                                                  - name: Deploy new container
    docker_container:
      name: myapp
      image: "{{ docker_image }}"
      state: started
      ports:
        - "80:80"
          
